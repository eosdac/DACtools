

ecc=require('eosjs').modules.ecc

// 'EOS6QU58BmoskyzzotbHPBRjNTcaSxoETEaiNaA6GYen4n4TYR9hB'
pubkey=ecc.privateToPublic('5Kf6Aa3LwLePRyTkxd5629mz8FY2p24EADAaTvK3XiXepWxWhu1')

b=ecc.PublicKey(pubkey).toBuffer()

// <Buffer 55 0e 69 6a>
c=require('create-hash')('rmd160').update(b).digest().slice(0, 4)


// web error
keya='6QU58BmoskyzzotbHPBRjNTcaSxoETEaiNaA6GYen4n4TYR9Hb'


//  '6QU58BmoskyzzotbHPBRjNTcaSxoETEaiNaA6GYen4n4TYR9hB'
keyb=require('bs58').encode(Buffer.concat([b, Buffer.from('550e696a', 'hex')]))


assert.equal('EOS' + keyb, pubkey)
assert.notEqual('EOS' + keya, pubkey)

//<Buffer 55 0e 64 12>
require('bs58').decode(keya).slice(-4)

// <Buffer 55 0e 69 6a>
require('bs58').decode(keyb).slice(-4)



//'1010101000011100110010000010010' <- web error checksum
parseInt('550e6412', 16).toString(2)

// '1010101000011100110100101101010' <- valid checksum
parseInt('550e696a', 16).toString(2)


// 0101 0101 0000 1110 0110 0100 0001 0010  <- web error checksum
// 0101 0101 0000 1110 0110 1001 0110 1010  <- valid checksum



---------------
pubkey='EOS5C5ZwtkorPABzdVdak9nUC2Yiv5avEDhfMJWob1c5aAoYauNeT'

pubkeyCheck = require('bs58').decode(pubkey.substring(3)).slice(-4)
pubkeyData = require('bs58').decode(pubkey.substring(3)).slice(0,-4)

fixkey = ecc.PublicKey.fromBuffer(pubkeyData).toString()
fixkeyCheck = require('bs58').decode(fixkey.substring(3)).slice(-4)
fixkeyData = require('bs58').decode(fixkey.substring(3)).slice(0,-4)

parseInt(pubkeyCheck.toString('hex'), 16).toString(2)
parseInt(fixkeyCheck.toString('hex'), 16).toString(2)


010 0110 1111 0001 0100 1101 0000 0000
111 0110 1110 0010 1101 1101 1000 0001

